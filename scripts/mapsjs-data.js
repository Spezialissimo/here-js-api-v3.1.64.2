
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.65.0/HERE_NOTICE
 */

H.util.eval("function dr(){}t(\"H.data.utils.Dom\",dr);dr.prototype.vh=function(a){return!!a&&/^\\s*(1|true)\\s*$/i.test(this.Wa(a))};dr.prototype.getBoolean=dr.prototype.vh;dr.prototype.Wa=function(a){var b;try{if(a.nodeType===Node.ATTRIBUTE_NODE)return a.value;var c=\"\";var d=0;var e=a.childNodes;for(b=e.length;d<b;d++)e[d].nodeType!==Node.COMMENT_NODE&&(c+=e[d].nodeValue.replace(/^\\s+|\\s+$/g,\"\"))}catch(f){}return c||\"\"};dr.prototype.getString=dr.prototype.Wa;\ndr.prototype.qm=function(a){return parseFloat(this.Wa(a))||0};dr.prototype.getFloat=dr.prototype.qm;dr.prototype.hw=function(a){var b=a.split(/\\s+/),c=b.length,d=!(b&&1==c),e=d?1:3,f=[],g;d||(b=a.split(\",\"),c=b.length);for(g=0;g<c;g+=e)if(a=this.ir(d?b[g]:g+3>b.length?null:b.slice(g,g+3)))f.push(a);else return[];return f};dr.prototype.parseCoords=dr.prototype.hw;\ndr.prototype.ir=function(a){if(!a)return null;var b=a instanceof Array&&0<a.length&&4>a.length?a:a.split(\",\");a=parseFloat(b[0]);var c=parseFloat(b[1]);b=parseFloat(b[2]);return isNaN(c)||isNaN(a)?null:new Of(c,a,isNaN(b)?void 0:b)};dr.prototype.parseCoord=dr.prototype.ir;dr.prototype.om=function(a){a=this.Wa(a);return/^[0-9a-fA-F]{8}$/.test(a)?\"#\"+a.substr(6,2)+a.substr(4,2)+a.substr(2,2)+a.substr(0,2):\"#000000ff\"};dr.prototype.getColor=dr.prototype.om;function er(a){a=a.attributes;for(var b,c=a.length;c--;)switch(b=a[c],b.name){case \"x\":this.x=parseFloat(b.value);break;case \"y\":this.y=parseFloat(b.value);break;case \"xunits\":this.af=\"fraction\"===dr.prototype.Wa(b);break;case \"yunits\":this.be=\"fraction\"===dr.prototype.Wa(b)}}t(\"H.data.kml.HotSpot\",er);function fr(a){var b=a.childNodes,c=new dr;this.offsetX=this.offsetY=0;for(a=b.length;a--;){var d=b[a];switch(d.nodeName){case \"href\":this.href=c.Wa(d)}}}t(\"H.data.kml.Icon\",fr);function gr(a){var b;if(a){a=a.childNodes;var c=a.length;for(b=new dr;c--;){var d=a[c];switch(d.nodeName){case \"scale\":this.scale=b.qm(d);break;case \"Icon\":this.icon=d=new fr(d);break;case \"hotSpot\":this.Iu=d=new er(d)}}}}t(\"H.data.kml.IconStyle\",gr);function hr(){this.fB={4:function(a){return[\"#\",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),\"ff\"].join(\"\")},5:function(a){return[\"#\",a.charAt(1),a.charAt(1),a.charAt(2),a.charAt(2),a.charAt(3),a.charAt(3),a.charAt(4),a.charAt(4)].join(\"\")},7:function(a){return a+\"ff\"},9:function(a){return a}};this.aD={4:function(a){return[ir(a.charAt(1)),ir(a.charAt(2)),ir(a.charAt(3)),255]},5:function(a){return[ir(a.charAt(1)),ir(a.charAt(2)),ir(a.charAt(3)),ir(a.charAt(4))]},7:function(a){a=\nparseInt(a.substring(1),16);return[a>>16&255,a>>8&255,a&255,255]},9:function(a){a=parseInt(a.substring(1),16);return[a>>24&255,a>>16&255,a>>8&255,a&255]}}}t(\"H.data.utils.ColorHelper\",hr);function ir(a){a=parseInt(a,16);return(a<<4)+a}function jr(a){return 16>a?\"0\"+Math.round(a).toString(16):Math.round(a).toString(16)}\nfunction kr(a,b,c){if(!/^(#|rgb).*/.test(b))return[0,0,0,255];c||(c=\"\",\"#\"===b.charAt(0)?c=a.fB[b.length]?b:\"\":\"rgb\"===b.substr(0,3)&&(b=b.match(/\\d+(\\.\\d+)?/g),c=b.length,c=2<c&&5>c?[\"#\",jr(+b[0]),jr(+b[1]),jr(+b[2]),3<c?jr(255*+b[3]):\"ff\"].join(\"\"):\"\"),b=c);a=a.aD[b.length](b);a[3]=Math.round(a[3]/255*100)/100;return a}\nhr.prototype.Dx=function(a,b){var c=\"\";if(!/^(#|rgb).*/.test(a)){c=\"\";for(a=0;6>a;a++)c+=\"ABCDEF0123456789\".charAt(Math.floor(16*Math.random()));return c+\"ff\"}a=kr(this,a,b);for(b=0;4>b;b++)c+=\"\"+jr(3>b?Math.floor(Math.random()*(a[b]-0+1))+0:255*a[b]);return c};hr.prototype.toRandomRGBA=hr.prototype.Dx;function lr(a){a=a.childNodes;for(var b,c=a.length,d=new dr,e=new hr;c--;)switch(b=a[c],b.nodeName){case \"color\":this.color=d.om(b);break;case \"colorMode\":this.Iy=d.Wa(b)}\"random\"===this.Iy&&(this.color=\"#\"+e.Dx(this.color,!1))}t(\"H.data.kml.ColorStyle\",lr);function mr(a){var b=a.childNodes,c=b.length,d=new dr;for(this.Ql=new lr(a);c--;)a=b[c],\"width\"===a.nodeName&&(this.width=d.qm(a))}t(\"H.data.kml.LineStyle\",mr);function nr(a){var b=a.childNodes,c=b.length,d=new dr;this.outline=this.fill=!0;for(this.Ql=new lr(a);c--;)switch(a=b[c],a.nodeName){case \"fill\":this.fill=d.vh(a);break;case \"outline\":this.outline=d.vh(a)}}t(\"H.data.kml.PolyStyle\",nr);function or(a){a=a.childNodes;for(var b,c=a.length,d=new dr;c--;)switch(b=a[c],b.nodeName){case \"bgColor\":this.bgColor=d.om(b);break;case \"textColor\":this.textColor=d.om(b);break;case \"text\":this.text=d.Wa(b);break;case \"displayMode\":this.displayMode=d.Wa(b)}}t(\"H.data.kml.BalloonStyle\",or);function pr(a){var b=a.childNodes,c=b.length;for(this.id=a.getAttribute(\"id\");c--;)switch(a=b[c],a.nodeName){case \"IconStyle\":this.Ju=a=new gr(a);break;case \"LineStyle\":this.Qh=a=new mr(a);break;case \"PolyStyle\":this.ow=a=new nr(a);break;case \"BalloonStyle\":this.Hl=a=new or(a)}}t(\"H.data.kml.Style\",pr);function qr(a){a=a.childNodes;for(var b,c=a.length,d=new dr;c--;)if(b=a[c],\"coordinates\"===b.nodeName){b=d.Wa(b);var e=[],f=new dr;try{e=f.hw(b)}catch(g){e=[]}this.Xl=2>e.length?[]:e}}t(\"H.data.kml.Line\",qr);qr.prototype.yh=function(){for(var a=new N,b=this.Xl?this.Xl.length:0;b--;)a.vg(this.Xl[b]);return a};function rr(){}rr.prototype.elevation=0;rr.prototype.Wt=0;function sr(a){var b=a.childNodes,c=b.length;this.Vt=new N;for(this.Ru=[];c--;){var d=b[c];var e=d.nodeName;if(\"outerBoundaryIs\"===e||\"innerBoundaryIs\"===e){var f=d.childNodes;for(d=f.length;d--;){var g=f[d];if(\"LinearRing\"===g.nodeName){var h=new qr(g);if(\"outerBoundaryIs\"===e){this.Vt=h.yh();var k=void 0,l=a,n=h.Xl;h=new dr;var p=l.querySelector(\"altitudeMode\");if(p&&p.parentNode===l&&!/^\\s*clampTo/.test(h.Wa(p))&&n){p=n.length;for(var q=0;q<p&&0!==k;q++){var r=n[q].alt;r?k?r!==k&&(k=0):k=r:k=0}(n=\nl.querySelector(\"*|altitudeOffset\"))&&n.parentNode===g&&\"http://www.google.com/kml/ext/2.2\"===n.namespaceURI&&(g=h.qm(n))&&(k+=g);k&&(k=Fc(2047,k),(g=l.querySelector(\"extrude\"))&&g.parentNode===l&&h.vh(g)?this.Wt=k:this.elevation=k)}}else this.Ru.push(h.yh())}}}}}u(sr,rr);t(\"H.data.kml.Polygon\",sr);function tr(a,b){var c=a&&a.childNodes||[],d=new dr;if(!a||!b)throw Error(\"Node or stylesContainer is not defined\");this.visibility=!0;this.BC=a;for(a=c.length;a--;){var e=c[a];switch(e.nodeName){case \"name\":this.name=d.Wa(e);break;case \"description\":this.description=d.Wa(e);break;case \"visibility\":this.visibility=d.vh(e);break;case \"open\":this.open=d.vh(e);break;case \"styleUrl\":if(this.fl=d.Wa(e))e=this.fl.substr(1),this.mz=b.Wp(e,!1);break;case \"Style\":this.qv=e=new pr(e)}}}\nt(\"H.data.kml.Feature\",tr);function ur(a){a=a.childNodes;for(var b,c=a.length,d=null,e=new dr;c--;)b=a[c],\"coordinates\"===b.nodeName&&(d=e.Wa(b));this.nv=null;d&&(this.nv=e.ir(d)||null)}t(\"H.data.kml.Point\",ur);ur.prototype.yh=function(){return this.nv};function vr(a,b){var c=document.createElement(\"CANVAS\");c.width=1;c.height=1;this.ks=a;this.hq={};this.kr={};this.gz=new wl(c);this.nd=b||\"\"}vr.prototype.create=function(a){this.rh=new tr(a,this.ks);return wr(this,a)};\nfunction wr(a,b,c){b=b.childNodes;for(var d=b.length,e,f={},g;d--;){var h=b[d];switch(h.nodeName){case \"Point\":h=new ur(h);g=xr(a,\"Marker\");if(h=h.yh())e=new hn(h,g),g.jr&&Jd(g.jr,\"statechange\",z(a.nC,a,g.jr,e,g),!1);break;case \"LineString\":h=new qr(h);g=xr(a,\"Polyline\");e=new Dl(h.yh(),g);break;case \"LinearRing\":h=new qr(h);g=xr(a,\"Polyline\");e=new Dl(h.yh(),g);break;case \"Polygon\":h=new sr(h);g=xr(a,\"Polygon\");g.elevation=h.elevation;g.extrusion=h.Wt;e=new Yh(new P(h.Vt,h.Ru),g);break;case \"MultiGeometry\":e=\nwr(a,h,new T)}e&&(a.rh.name&&(f.name=a.rh.name),a.rh.description&&(f.description=a.rh.description),g&&g.Hl&&(f.balloonStyle=g.Hl),f.kmlNode=a.rh.BC,e.setData(f),c&&c.ba(e))}return c||e}\nvr.prototype.nC=function(a,b,c){var d=c.anchor,e=c.scale;c=e+\"_\"+d.x+d.y+d.af+d.be+\"_\"+c.href;var f={};if(1===a.getState()){var g=this.hq[c];if(!g){var h=d.x;var k=d.y;if(g=a.pc())g={w:g.w*e,h:g.h*e},f.size=g;h=d.af&&g?g.w*h:h*e;k=d.be&&g?g.h*(1-k):!d.be&&g?g.h-k*e:k*e;f.anchor={x:h,y:k};g=new wl(a.Ve(),f);this.hq[c]=g}b.ye(g)}delete this.kr[c]};\nfunction xr(a,b){var c=a.rh,d={visibility:c.visibility};var e=new hr;var f=1;var g={x:0,y:0,af:!1,be:!1};var h=yr(a,c.mz);c.qv&&(h=yr(a,c.qv,h));switch(b){case \"Marker\":if(h&&h.Ju){e=h.Ju;e.scale&&(f=e.scale);if(e.Iu){var k=e.Iu;g={x:k.x,y:k.y,af:k.af,be:k.be}}e.icon&&e.icon.href?(b=e.icon.href,zr.test(b)||(b=a.nd+b),e=f+\"_\"+g.x+g.y+g.af+g.be+\"_\"+b,k=a.hq[e]||a.kr[e],k||(k=new wl(b),a.kr[e]=k),0===k.getState()?(d.icon=a.gz,d.jr=k,d.href=b,d.anchor=g,d.scale=f):1===k.getState()&&(d.icon=k)):1!==f&&\n(k||(g={x:14,y:4,af:!1,be:!1}),e=wl,a=a.Hp(),k={w:28*f,h:36*f},f={size:new ag(k.w,k.h),anchor:new K(g.af?k.w*g.x:g.x*f,g.be?k.h*(1-g.y):k.h-g.y*f),hitArea:new Mk(Nk.POLYGON,[0*f,16*f,0*f,7*f,8*f,0*f,18*f,0*f,26*f,7*f,26*f,16*f,18*f,34*f,8*f,34*f])},d.icon=new e(a,f))}break;case \"Polyline\":d.style={};h&&h.Qh&&(f=h.Qh,d.style.strokeColor=\"rgba(\"+kr(e,f.Ql.color,!0)+\")\",0<=f.width&&(d.style.lineWidth=f.width));break;case \"Polygon\":d.style={},h&&(h.Qh&&(f=h.Qh,d.style.strokeColor=\"rgba(\"+kr(e,f.Ql.color,\n!0)+\")\",0<=f.width&&(d.style.lineWidth=f.width)),h.ow&&(f=h.ow,d.style.fillColor=f.fill?\"rgba(\"+kr(e,f.Ql.color,!0)+\")\":\"rgba(0,0,0,0)\",f.outline||(d.style.lineWidth=0)))}d.Hl=h.Hl;return d}function yr(a,b,c){c=c||{};for(var d in b)b.hasOwnProperty(d)&&(c[d]=\"object\"===typeof b[d]?yr(a,b[d],c[d]):b[d]);return c}var zr=/^[^:\\/]+:/;vr.prototype.Hp=function(){return'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28px\" height=\"36px\"><path d=\"M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z\" fill=\"#000\" fill-opacity=\".2\"/><path d=\"M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z\" fill=\"#fff\"/><path d=\"M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z\" fill=\"#18d\"/></svg>'};function Ar(a){Za(this,Ar);this.url=a;this.kj=[];this.de=x;this.pj=z(this.pj,this);F.call(this)}u(Ar,F);t(\"H.data.AbstractReader\",Ar);var Br={ERROR:-1,LOADING:0,VISIT:1,READY:2};Ar.State=Br;Ar.prototype.state=Br.READY;Ar.prototype.j={Ri:\"statechange\"};Ar.prototype.Vb=function(){if(!this.de){this.de=new M;var a=this.de.td();a.ld(this.kj)}return new pk(this.de)};Ar.prototype.getLayer=Ar.prototype.Vb;Ar.prototype.uA=function(){return this.kj.concat([])};Ar.prototype.getParsedObjects=Ar.prototype.uA;\nAr.prototype.i=function(){return this.url};Ar.prototype.getUrl=Ar.prototype.i;Ar.prototype.mD=function(a){if(this.state===Br.LOADING||this.state===Br.VISIT)throw Error(\"InvalidState: state \"+this.state);this.kj=[];this.de=x;this.url=a;return this};Ar.prototype.setUrl=Ar.prototype.mD;Ar.prototype.getState=function(){return this.state};Ar.prototype.getState=Ar.prototype.getState;Ar.prototype.J=function(a,b,c){this.state=a;this.dispatchEvent(new Cr(b||this,this.j.Ri,a,c||\"\"))};\nAr.prototype.parse=function(){var a=this;Ya(this.url)?(this.J(Br.LOADING),(new pf(\"text/plain\",this.url)).then(function(b){try{a.pj(b)}catch(c){a.J(Br.ERROR,x,c.message)}},function(){a.J(Br.ERROR,x,\"Error loading file\")})):a.J(Br.ERROR,x,\"File url was not set\")};Ar.prototype.parse=Ar.prototype.parse;function Cr(a,b,c,d){Cr.g.constructor.call(this,b,a);this.state=c;this.message=d}u(Cr,td);Ar.Event=Cr;function Dr(a,b){a=a.childNodes;var c=a.length,d=new dr;for(this.zD=b;c--;)switch(b=a[c],b.nodeName){case \"key\":this.key=d.Wa(b);break;case \"styleUrl\":this.fl=d.Wa(b)}}t(\"H.data.kml.Pair\",Dr);Dr.prototype.O=function(){if(this.fl){var a=\"highlight\"===this.key?!0:!1;a=this.zD.Wp(this.fl.substr(1),a)}return a};Dr.prototype.getStyle=Dr.prototype.O;function Er(a,b){var c=a.childNodes,d=c.length;this.ks=b;this.id=a.getAttribute(\"id\");for(this.zn=[];d--;)a=c[d],\"Pair\"===a.nodeName&&(a=new Dr(a,this.ks),this.zn.push(a))}t(\"H.data.kml.StyleMap\",Er);Er.prototype.O=function(a){var b=null;a=a?\"highlight\":\"normal\";for(var c=this.zn.length;c--;)this.zn[c].key===a&&(b=this.zn[c].O());return b};Er.prototype.getStyle=Er.prototype.O;function Fr(){this.rx={}}t(\"H.data.kml.StyleContainer\",Fr);Fr.prototype.Fo=function(a){a&&a.id&&(this.rx[\"style_\"+a.id]=a)};Fr.prototype.addStyle=Fr.prototype.Fo;Fr.prototype.Wp=function(a,b){a=this.rx[\"style_\"+a];a instanceof Er&&(a=a.O(b));return a};Fr.prototype.getStyleById=Fr.prototype.Wp;function Gr(a){var b=a?a.lastIndexOf(\"/\"):-1;this.Ek=[];Ar.call(this,a);0<=b&&(this.rB=a.substr(0,b)+\"/\")}u(Gr,Ar);t(\"H.data.kml.Reader\",Gr);\nGr.prototype.pj=function(a){var b,c=null;if(eb(a)&&\"\"!=a.trim()){try{var d=(new DOMParser).parseFromString(a,\"text/xml\")}catch(h){this.J(Br.ERROR,x,\"Error parsing KML document\");return}if(d.getElementsByTagName(\"parsererror\").length)this.J(Br.ERROR,x,\"Error parsing KML document\");else if((a=d.childNodes&&\"kml\"===d.childNodes[0].nodeName?d.childNodes[0]:void 0)&&(b=Hr(a.childNodes,\"Document\")[0]),b=b||a){d=new Fr;for(var e=Hr(b.childNodes,\"Style\"),f=Hr(b.childNodes,\"StyleMap\"),g=e.length;g--;)a=new pr(e[g]),\nd.Fo(a);for(g=f.length;g--;)a=new Er(f[g],d),d.Fo(a);this.YB=new vr(d,this.rB);a=b.childNodes;for(b=a.length;b--;)if(e=a[b],d=c,\"Placemark\"===e.nodeName?(e=this.YB.create(e))&&this.Ug(e,d):\"Folder\"===e.nodeName&&(e={group:new T,node:e},this.Ug(e.group,d),this.Ek.push(e)),!b&&(d=this.Ek.shift()))a=d.node.childNodes,c=d.group,b=a.length;this.J(Br.READY)}else this.J(Br.ERROR,x,\"Invalid KML document\")}else this.J(Br.ERROR,x,\"Unable to create objects from the empty data\")};\nGr.prototype.Ug=function(a,b){b?b.ba(a):(this.de&&this.de.td().ba(a),this.kj.push(a),this.J(Br.VISIT,a))};function Hr(a,b){for(var c=a.length,d,e=[];c--;)d=a[c],d.nodeName===b&&e.push(d);return e};function Ir(a,b,c){this.ef=a=hd(a,0,30);this.ub=b;this.sj=c;this.js=[];this.fi=[];do this.fi[a]=[],this.js[a]=new Jr;while(a--);b===Kr?(this.Vs=Lr,this.normalize=Mr):(this.Vs=Nr,this.normalize=Or);this.kk=1/0;this.an=-1/0}var Pr=Math.log(.5);function Mr(a){return this.np?Math.round((a-this.kk)/this.np*255):127}function Or(a){return void 0===this.du?127:Math.round(255*Math.pow(a,this.du))}\nIr.prototype.Bc=function(a){var b,c;var d=a.value;void 0===d&&(d=1);d>this.an&&(this.an=d,this.np=this.an-this.kk);d<this.kk&&(this.kk=d,this.np=this.an-this.kk);var e=Vf.Ue(a).scale(1073741823).floor();d=this.ef;var f=e.x>>30-d;e=e.y>>30-d;for(c=this.Vs;-1<d;){this.fi[d][e]||(this.fi[d][e]=[]);(b=this.fi[d][e][f])||(b=this.fi[d][e][f]=new c(f,e,d));b.Bc(a,d);var g=this.js[d];g.Cv>b.gd&&(g.Cv=b.gd);g.Th<b.gd&&(g.Th=b.gd);g.Bv>b.Ec&&(g.Bv=b.Ec);g.Lq<b.Ec&&(g.Lq=b.Ec);d--;f>>=1;e>>=1}};\nfunction Qr(a,b,c,d,e){var f=1<<b,g,h;d=gd(d,f);f=0<=c&&c<f&&(g=a.fi[b])&&(h=g[c])&&(f=h[d])||null;!f&&e&&0<=b&&(f=Qr(a,b-1,c>>1,d>>1,e));return f}function Rr(a,b,c,d,e,f){for(var g,h=[];c<=d;c++)for(g=e;g<=f;g++)h.push(Qr(a,b,c,g,!1));return h}function Sr(a,b){var c=0,d=0,e=Qr(a,0,0,0,!1),f;if(b.jm)return b.Ej;b.z===a.ef?b.Ej=b.Ec:(Tr(a,b,function(g){var h=Ur(a,g),k=4-h.length;if(g.z!==a.ef){for(f=0;f<h.length;f++)c+=h[f].Ec,d++;c+=k*e.Ec;d+=k}}),b.Ej=c/d);b.jm=!0;return b.Ej}\nfunction Tr(a,b,c){b=[b];for(var d,e;0<b.length;)e=b.shift(),d=Ur(a,e),c(e),b.push.apply(b,d)}function Ur(a,b){var c=[],d,e,f;for(e=0;1>=e;e++)for(f=0;1>=f;f++)(d=Qr(a,b.z+1,2*b.x+e,2*b.y+f,!1))&&c.push(d);return c}Ir.prototype.clear=function(){Ir.call(this,this.ef,this.ub,this.sj)};function Nr(a,b,c){this.x=a;this.y=b;this.z=c;this.Ec=this.gd=this.count=0;this.jm=!1;this.Ej=0}Nr.prototype.Bc=function(a,b){this.count++;this.gd+=a.value||1;this.Ec=this.gd/Math.pow(2,2*(30-b))};\nfunction Lr(a,b,c){this.x=a;this.y=b;this.z=c;this.Ec=this.gd=this.count=0;this.jm=!1;this.Ej=0}Lr.prototype.Bc=function(a){a=a.value;this.gd+=void 0!==a?a:1;this.Ec=this.gd/++this.count;this.jm=!1};function Jr(){this.Cv=this.Bv=1/0;this.Th=this.Lq=-1/0};function Vr(a,b){var c,d=0;if(!ya(a)||Na(a))throw new C(Vr,0,a);for(c in a){var e=+c;d++;if(!(hb(e)&&0<=e&&1>=e&&eb(a[c])))throw new C(Vr,0,a);}if(2>d)throw new C(Vr,0,\"Specify at least 2 stops\");this.xD=a;this.Su=!!b}t(\"H.data.heatmap.Colors\",Vr);var Wr=new Vr({0:\"#008\",\"0.2\":\"#0b0\",\"0.5\":\"#ff0\",\"0.7\":\"#f00\"},!0);Vr.DEFAULT=Wr;function Xr(a,b,c,d,e){e&1&&Yr(a,a,b,c,d,0);e&2&&Yr(a,a,b,c,d,1);e&4&&Yr(a,a,b,c,d,2);e&8&&Yr(a,a,b,c,d,3)}\nfunction Yr(a,b,c,d,e,f){var g=(c+1)*(c+1),h,k=4*d,l=c+1,n,p=[{r:0,uz:0,b:0,a:0,next:null}];var q=1;var r=[\"r\",\"g\",\"b\",\"a\"][f];var v=2*c+1;for(var w,y;q<v;q++)p[q]={r:0,uz:0,b:0,a:0,next:null},p[q-1].next=p[q];p[2*c].next=p[0];var D=4*(d-1);for(h=0;h<e;h++){var G=h*k;var O=a[G+f];var Q=O*l*(c+2)/2;v=O*l;for(q=0;q<=c;q++)p[q][r]=O;var Ga=0;for(q=1;q<=c;q++){var ha=q<d?G+4*q:G+D;ha=a[ha+f];Q+=ha*(l-q);Ga+=ha;p[c+q][r]=ha}ha=p[0];w=p[l];q=G;y=4*l;var ob=G+D;for(O=0;O<d;O++){b[q+f]=Q/g;Q-=v;var sa=O+\nl<d?q+y:ob;sa=a[sa+f];Ga+=sa;Q+=Ga;v-=ha[r];v+=w[r];Ga-=w[r];ha[r]=sa;ha=ha.next;w=w.next;q+=4;if(!Q)for(;(n=4*(O+l))<k&&0===a[G+f+n];)O++,q+=4}}G=(e-1)*k;for(O=0;O<d;O++){a=4*O;h=b[a+f];Q=h*l*(c+2)/2;v=h*l;for(q=0;q<=c;q++)p[q][r]=h;Ga=0;for(q=1;q<=c;q++)ha=q<e?a+q*k:a+G,ha=b[ha+f],Q+=ha*(c-q+1),Ga+=ha,p[c+q][r]=ha;ha=p[0];w=p[l];q=a;ob=l*k;D=a+G;for(h=0;h<e;h++)if(b[q+f]=Q/g,Q-=v,sa=h+l<e?q+ob:D,sa=b[sa+f],Ga+=sa,Q+=Ga,v-=ha[r],v+=w[r],Ga-=w[r],ha[r]=sa,ha=ha.next,w=w.next,q+=k,!Q)for(;(n=h+l)<\ne&&0===b[n*k+f+a];)h++,q+=k}};function Zr(a,b,c){this.gB=b=a>>b;this.JB=Math.log(b)*Math.LOG2E;this.Gc=a=document.createElement(\"CANVAS\");this.By=a.getContext(\"2d\");this.Cy=a.width=a.height=3*b;var d=document.createElement(\"canvas\");a=c.Su;var e=c.xD;b=[];var f;d.width=256;d.height=1;d=d.getContext(\"2d\");for(g in e)e.hasOwnProperty(g)&&b.push({stop:parseFloat(g),value:e[g]});e=b.length;b.sort(this.wD);0<b[0].stop&&b.unshift({stop:0,value:b[0].value});1>b[e-1].stop&&b.push({stop:1,value:b[e-1].value});e=b.length;var g=d.createLinearGradient(0,\n0,256,0);for(f=0;f<e;f++){if(!a&&k){var h=k.stop+(b[f].stop-k.stop)/2;g.addColorStop(h,k.value);g.addColorStop(h,b[f].value)}g.addColorStop(b[f].stop,b[f].value);var k=b[f]}d.fillStyle=g;d.fillRect(0,0,256,1);this.Jy=d.getImageData(0,0,256,1).data;this.hB=c.Su}Zr.prototype.wD=function(a,b){return a.stop-b.stop};Zr.prototype.Zx=\"#000\";Zr.prototype.ny=\"#080\";function $r(a,b){this.canvas=a;this.size=b};function as(a){var b=a||{},c=+b.sampleDepth,d=b.pointSize;a=+b.coarseness;var e=b.colors,f={min:b.min,max:b.max,engineType:b.engineType},g=b.tileSize,h=+b.dataMax;b.tileSize&&(f.tileSize=g);R.call(this,f);this.Hg(b.opacity);this.ub=\"value\"===b.type?Kr:bs;this.sampleDepth_=hb(c)?hd(Math.round(c),1,8):4;this.Sw=this.ub===bs?hb(d)?hd(Math.round(7-d),0,6):2:1;this.gt=!!b.assumeValues;b=this.max;this.sj=hb(h)?hd(Math.round(h),this.min,b+this.sampleDepth_):b;a=hb(a)?hd(Math.round(a),0,3):1;if(e&&!B(e,Vr))throw new C(as,\n0,\"colors\");this.Ei=new Ir(b+this.sampleDepth_+this.Sw,this.ub,this.sj);this.DD=new Zr(this.tileSize,a,e||Wr);this.ug=z(this.ug,this);this.og=z(this.og,this);this.Rn=new Wj(20,this.ug)}u(as,R);t(\"H.data.heatmap.Provider\",as);as.prototype.Gd=function(a){this.Hg(a)};as.prototype.setOpacity=as.prototype.Gd;as.prototype.Xe=function(){return this.Uc};as.prototype.getOpacity=as.prototype.Xe;as.prototype.Dk=le;as.prototype.providesRasters=as.prototype.Dk;\nas.prototype.u=function(a,b,c,d,e){var f=this.gt,g,h;if(Qr(this.Ei,0,0,0,!1)){if(!f){var k=Rr(this.Ei,c,b-1,b+1,a-1,a+1);for(g=k.length;g--&&!f;)if(null!==k[g]){f=!0;break}}f&&(h=this.Rn.push([a,b,c,d,e],this.og))}f||d(null);return h||Nj};as.prototype.requestInternal=as.prototype.u;\nas.prototype.ug=function(a,b){var c=a.done,d=b[0],e=b[1],f=b[2];b=document.createElement(\"canvas\");var g=this.tileSize,h=b.getContext(\"2d\");b.width=b.height=g;var k=this.DD;var l=this.Ei,n=this.gt,p=this.ub,q=this.Sw;var r=k.gB;var v=k.By,w,y,D=p===bs?void 0===q?2:q:1;q=D;D=Math.min(this.sampleDepth_+D,k.JB);var G=k.Cy,O=l.ef;if(n&&p===Kr){for(y=-1;1>=y;y++)for(n=-1;1>=n;n++){var Q=(Q=Qr(l,f,e+y,d+n,!0))?l.normalize(Sr(l,Q)):128;v.fillStyle=\"rgba(\"+Q+\",128,0,1)\";v.fillRect((n+1)*r,(y+1)*r,r,r)}n=\nr-Math.floor(r/10);y=3;Q=v.getImageData(0,0,G,G);Xr(Q.data,n,G,G,y);v.putImageData(Q,0,0)}else v.fillStyle=n?k.ny:k.Zx,v.fillRect(0,0,G,G);for(;q<=D&&f+q<=O;q++){n=r>>q;y=r-n;var Ga=p===bs?127+Math.floor(128/(1<<D-q)):255;Q=(1<<q)+2;var ha=1<<q;var ob=d<<q;var sa=e<<q;ha=Rr(l,f+q,sa-1,sa+ha,ob-1,ob+ha);for(ob=ha.length;ob--;){sa=ob%Q;var pb=ob/Q<<0;if(w=ha[ob])w=l.normalize(w.Ec),v.fillStyle=\"rgba(\"+w+\",\"+Ga+\",0,1)\",v.fillRect(sa*n+y,pb*n+y,n,n)}Q=v;Ga=n;ha=y;ob=r+2*n;n=r+2*n;sa=sa=3;pb=v.getImageData(ha,\ny,ob,n);Xr(pb.data,Ga,ob,n,sa);Q.putImageData(pb,ha,y)}d=v.getImageData(0,0,G,G);e=k.Jy;f=k.hB;l=d.data;D=0;for(G=l.length;D<G;D+=4)p=l[D],q=l[D+1],4===e.length&&(p=0),l[D]=e[4*p],l[D+1]=e[4*p+1],l[D+2]=e[4*p+2],l[D+3]=e[4*p+3]*(f?q/255:10>q?0:1);v.putImageData(d,0,0);k=new $r(k.Gc,r);r=k.size;h.drawImage(k.canvas,r,r,r,r,0,0,g,g);c.call(a,b)};as.prototype.og=function(a,b,c){var d=a.data;a=d[3];d=d[4];c?d():a(b)};\nas.prototype.at=function(a,b){var c;if(!db(a))throw new C(this.at,0,a);if(c=a.length){for(;c--;)this.Ei.Bc(a[c]);a=this.Ei;var d;c=a.js;var e=a.ef,f=0;if(a.ub===bs){var g=c[a.ef].Th;for(d=a.ef;0<=d;d--)if(c[d].Th===g)f=d;else break;g=c[0].Th;for(d=0;d<=f;d++)if(g===c[d].Th)e=d;else break;f>a.sj&&(f=a.sj);g=Math.round(e+(f-e)/2);a.du=Pr/Math.log(c[g].Lq)}this.reload(!!b)}};as.prototype.addData=as.prototype.at;as.prototype.clear=function(){this.Ei.clear();this.reload(!0)};as.prototype.clear=as.prototype.clear;var bs=0,Kr=1;function cs(a,b){this.$a=a;this.Re=b}\ncs.prototype.create=function(a,b){var c=a.coordinates;switch(a.type){case \"Point\":var d=new hn(ds(c));break;case \"LineString\":d=new Dl(es(c));break;case \"Polygon\":d=new Yh(fs(c));break;case \"MultiPoint\":var e=0;var f=c.length;d=[];if(this.Re){for(;e<f;e++)d.push(ds(c[e]));c=new hn(new yj(d))}else{for(;e<f;e++)d.push(new hn(ds(c[e])));c=new T;c.ld(d)}d=c;f=\"multiPoint\";break;case \"MultiLineString\":e=0;f=c.length;d=[];if(this.Re){for(;e<f;e++)d.push(es(c[e]));c=new Dl(new Cl(d))}else{for(;e<f;e++)d.push(new Dl(es(c[e])));\nc=new T;c.ld(d)}d=c;f=\"multiLineString\";break;case \"MultiPolygon\":d=[];e=0;f=c.length;if(this.Re){for(;e<f;e++)d.push(fs(c[e]));c=new Yh(new Bh(d))}else{for(;e<f;e++)d.push(new Yh(fs(c[e])));c=new T;c.ld(d)}d=c;f=\"multiPolygon\";break;case \"GeometryCollection\":c=d=new T;e=a.geometries;f=0;for(var g=e.length;f<g;f++)this.create(e[f],c);f=\"geometryCollection\"}d&&(c=d,e=a.properties,a=a.id,g={},e&&(this.Re?g=e:g.properties=e),f&&!this.Re&&(g[f]=!0),a&&c.cs(a),c.setData(g),this.$a(d));b&&d&&b.ba(d);return d};\ncs.prototype.create=cs.prototype.create;function ds(a){return new Of(a[1],a[0])}function fs(a){for(var b=es(a[0]),c=[],d,e=1,f=a.length;e<f;e++)d=es(a[e]),c.push(d);return new P(b,c)}function es(a){for(var b=0,c=a.length,d=new N;b<c;b++)d.vg(ds(a[b]));return d};function gs(a,b){b=b||{};this.$a=b.style||this.jh;(this.Re=!!b.disableLegacyMode)||window.console.warn(\"H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true.\");Ar.call(this,a)}u(gs,Ar);t(\"H.data.geojson.Reader\",gs);\ngs.prototype.pj=function(a){var b,c;try{var d=\"string\"===typeof a?JSON.parse(a):a;if(\"object\"===typeof d){var e=new cs(this.$a,this.Re);switch(d.type){case \"FeatureCollection\":if(b=d.features){var f=new T;this.Ug(f);for(c=0;c<b.length;c++){var g=hs(b[c]);(g=e.create(g))&&f.ba(g)}}break;case \"Feature\":g=hs(d);(g=e.create(g))&&this.Ug(g);break;default:(g=e.create(d))&&this.Ug(g)}this.J(Br.READY)}else this.J(Br.ERROR,x,\"Invalid syntax\")}catch(h){this.J(Br.ERROR,x,\"Parse error. \"+h.message)}};\ngs.prototype.yC=function(a){this.J(Br.LOADING);this.pj(a)};gs.prototype.parseData=gs.prototype.yC;gs.prototype.jh=function(){};function hs(a){var b={};if(a.geometry){var c=a.geometry;b.type=c.type;b.properties=a.properties;c.coordinates&&(b.coordinates=c.coordinates);c.geometries&&(b.geometries=c.geometries);a.id&&(b.id=a.id)}return b}gs.prototype.Ug=function(a){this.de&&this.de.td().ba(a);this.kj.push(a);this.J(Br.VISIT,a)};t(\"H.data.buildInfo\",function(){return xm(\"H-data\",\"1.65.0\",\"643e65e\",{region:\"row\"})});\n");