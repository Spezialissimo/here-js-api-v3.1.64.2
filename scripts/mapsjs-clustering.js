
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.65.0/HERE_NOTICE
 */

H.util.eval("Ng.prototype.Ce=ca(2,function(a,b){this.root.Ce(a,hb(b)?b:this.Sh)});Rg.prototype.Ce=ca(1,function(a,b){var c=0,d;if(!a(this)&&b--)for(;3>=c;c++)(d=this[c])&&d.Ce(a,b)});t(\"H.clustering.DataPoint\",function(a,b,c,d){this.lat=a;this.lng=b;this.wt=c===+c?c:1;this.data=d});function is(a){this.qa=a;this.xy=11;a=document.createElement(\"canvas\");var b=a.getContext(\"2d\"),c=this.qa,d=14*c;a.width=d;a.height=d;b.scale(c,c);b.beginPath();b.strokeStyle=\"#FFFFFF\";b.fillStyle=\"#1080DD\";b.arc(7,7,6,0,2*Math.PI,!1);b.fill();b.lineWidth=1;b.stroke();this.WB=new wl(a,{size:{w:14,h:14},anchor:{x:7,y:7}});this.qt={};this.rt={}}t(\"H.clustering.theme.Circular\",is);\nfunction js(a,b,c){var d,e=document.createElement(\"canvas\"),f=e.getContext(\"2d\",{willReadFrequently:!0});var g=a.qa;var h=b*g;e.width=h;e.height=h;f.scale(g,g);g=b+\":\"+c;(d=a.qt[g])?f.putImageData(d,0,0):(b/=2,f.beginPath(),f.strokeStyle=\"rgba(\"+c+\",0.2)\",f.fillStyle=\"rgba(\"+c+\",1)\",f.arc(b,b,b/5*3,0,2*Math.PI,!1),f.fill(),f.lineWidth=b/5*4,f.stroke(),a.qt[g]=f.getImageData(0,0,h,h));return e}\nis.prototype.Hz=function(a){var b=a.Zd();var c=this.rt[b];if(!c){if(10>b){c=js(this,28,\"118,209,0\");var d={x:11,y:18}}else 25>b?(c=js(this,38,\"255,105,0\"),d={x:13,y:23}):50>b?(c=js(this,38,\"240,60,0\"),d={x:13,y:23}):100>b?(c=js(this,38,\"181,0,21\"),d={x:13,y:23}):1E3>b?(c=js(this,48,\"181,0,21\"),d={x:15,y:28}):(c=js(this,66,\"181,0,21\"),d={x:20,y:38});var e=c.getContext(\"2d\");e.fillStyle=\"#FFFFFF\";e.font=\"bold \"+this.xy+\"px Arial\";e.fillText(String(b),d.x,d.y);d=c.width/this.qa;c=new wl(c,{size:{w:d,\nh:d},anchor:{x:d/2,y:d/2}});this.rt[b]=c}b=new hn(a.Da(),{icon:c,min:a.Ud(),max:a.sm()});b.setData(a);return b};is.prototype.getClusterPresentation=is.prototype.Hz;is.prototype.rA=function(a){var b=new hn(a.Da(),{icon:this.WB,min:a.Ud()});b.setData(a);return b};is.prototype.getNoisePresentation=is.prototype.rA;function ks(a){od.call(this);this.jc=[];var b;a?Qa(b={},ls,a):b=ls;this.options=b;od.call(this)}u(ks,od);var ms={clusters:[],noisePoints:[]},ls={projection:Vf,min:0,max:22,eps:32,minWeight:2};m=ks.prototype;m.xe=function(a){this.jc=a;this.rd=!0};m.Bc=function(a){this.jc.push(a);this.rd=!0};m.El=function(a){this.jc=this.jc.concat(a);this.rd=!0};m.Hk=function(a){this.jc=this.jc.filter(function(b){return b!==a});this.rd=!0};m.disposeInternal=function(){ks.g.disposeInternal.call(this);delete this.jc};\nks.prototype.disposeInternal=ks.prototype.disposeInternal;ks.prototype.Xw=ne;function ns(a,b){this.lr=a;this.ge=b}t(\"H.clustering.grid.NoisePoint\",ns);ns.prototype.Da=function(){return Qf(this.lr)};ns.prototype.getPosition=ns.prototype.Da;ns.prototype.Zd=function(){return this.lr.wt};ns.prototype.getWeight=ns.prototype.Zd;ns.prototype.ag=me;ns.prototype.isCluster=ns.prototype.ag;ns.prototype.Ud=function(){return this.ge};ns.prototype.getMinZoom=ns.prototype.Ud;ns.prototype.getData=function(){return this.lr.data};ns.prototype.getData=ns.prototype.getData;function os(a,b,c){this.Mq=this.ge=c;this.mr=[];this.ws=0;this.N=jg(a,b,!0)}t(\"H.clustering.grid.Cluster\",os);os.prototype.Ti=function(a){this.Wc||(this.Wc=Qf(a));this.ws+=a.wt||1;this.mr.push(a)};os.prototype.Da=function(){return this.Wc};os.prototype.getPosition=os.prototype.Da;os.prototype.Zd=function(){return this.ws};os.prototype.getWeight=os.prototype.Zd;os.prototype.ag=le;os.prototype.isCluster=os.prototype.ag;os.prototype.Ud=function(){return this.ge};os.prototype.getMinZoom=os.prototype.Ud;\nos.prototype.sm=function(){return this.Mq};os.prototype.getMaxZoom=os.prototype.sm;os.prototype.G=function(){return this.N};os.prototype.getBoundingBox=os.prototype.G;os.prototype.zp=function(a){this.Dj(a)};os.prototype.forEachEntry=os.prototype.zp;os.prototype.Dj=function(a){var b=this;if(!Wa(a))throw new C(this.Dj,0,a);this.mr.forEach(function(c){a(new ns(c,b.ge+1))})};os.prototype.forEachDataPoint=os.prototype.Dj;function ps(a){ks.call(this,a)}u(ps,ks);\nps.prototype.gs=function(a){var b=this.options,c=b.min,d=b.max,e=[],f=[],g;if(this.rd){for(g=this.jc;c<=d;c++){for(var h,k=void 0,l,n,p,q,r,v,w,y=c,D=g,G=e,O=f,Q=b.eps,Ga=b.projection,ha=b.minWeight,ob=D.length,sa=Math.pow(2,y+8),pb=[];w=D[--ob];)if(!w.Ds){n=Ga.Ue(w).scale(sa).floor();v=sa;r=n.x;q=n.y;for(l=pb.length;l--;)h=pb[l],p=h.Da(),h.Bs||(h.Bs=Ga.Ue(p).scale(sa).floor()),p=h.Bs,p=p.lb(n),p<v&&(v=p,k=h);k&&k.G().If(w)||(k=new os(Ga.Bn({x:(r-Q)/sa,y:(q-Q)/sa}),Ga.Bn({x:(r+Q)/sa,y:(q+Q)/sa}),\ny),pb.push(k));k.Ti(w);k=null}for(ob=pb.length;ob--;)if(h=pb[ob],l=h.Zd(),l<ha)for(h=h.mr,l=h.length;w=h[--l];)O.push(new ns(w,y)),w.Ds=!0;else G.push(h)}c=0;for(d=g.length;c<d;c++)delete g[c].Ds;this.rd=!1;a({clusters:e,noisePoints:f})}};function qs(a){ks.call(this,a);a=this.options;if(a.projection!==Vf)throw new C(qs,0,\"Other projection than mercator not supported yet\");this.oe=a.projection;this.qp=a.eps;this.RB=a.minWeight;this.lw=new Wf(this.oe);(new $m).registerProcessor(\"cluster\",\"H.clustering.dynamicgrid.worker\");this.jg=z(this.jg,this);this.Sq=z(this.Sq,this)}u(qs,ks);qs.prototype.Xw=function(a,b){this.Ry=a;this.Sy=Ic(b)};\nqs.prototype.gs=function(a,b){var c=this.Og;var d=this.Ry,e=this.Sy||0;var f=!c||!(c.zoom===e&&c.Wi.ga(d));if(d&&(this.rd||f)){c&&3>c.state&&c.cancel();this.rd=!1;c=this.qp;if(c>=128*Nc(2,e))var g=rs;else{f=this.lw;f.Xa(e);var h=f.Jb(d.Qc());g=f.Jb(d.Oc());h.y-=c;g.y+=c;h=f.wk(h);var k=f.wk(g);g=new J(h.lat,h.lng,k.lat,k.lng);c=f.ab(c,0).lng+180;g=g.fe(h.lat,h.lng-c,k.lat,h.lng).fe(h.lat,k.lng,k.lat,k.lng+c)}c=g;h=this.jc;g=[];for(f=h.length;f--;)c.If(h[f])&&g.push(h[f]);0<g.length?(this.Og=new ss(d,\ne,g,this.qp,this.RB,this.oe!==Vf,a,b),this.Og.then(this.jg,this.Sq)):a(ms)}};\nqs.prototype.jg=function(a){Ba(a)||(a=new globalThis.Uint32Array(a));for(var b=this.Og,c=b.oC,d=0,e=a[d++],f=Array(e),g=0,h=[],k=a.length,l=this.Og.Uy,n=this.Og.zoom;e--;)f[g++]=new ns(l[a[d++]],n);for(;d<k;){e=a[d++];g=l[a[d]];var p=this.lw;var q=this.qp;p.Xa(this.Og.zoom);var r=p.Jb(g);g=p.ab(r.x-q,r.y-q);p=p.ab(r.x+q,r.y+q);g=new J(g.lat,g.lng,p.lat,p.lng);for(g=new os(g.Qc(),g.Oc(),n);e--;)g.Ti(l[a[d++]]);h.push(g)}c.call(b,{clusters:h,noisePoints:f})};qs.prototype.Sq=function(a){eb(a)&&this.Og.eC(a)};\nvar rs=new J(90,-180,-90,180);qs.prototype.disposeInternal=function(){qs.g.disposeInternal.call(this)};qs.prototype.disposeInternal=qs.prototype.disposeInternal;function ss(a,b,c,d,e,f,g,h){this.Wi=a;this.zoom=b;this.Uy=c;this.oC=g;this.eC=h;a=c.length;g=3*a;h=new (globalThis.Float64Array||Array)(g);for(var k;a--;)k=c[a],h[--g]=k.lat,h[--g]=k.lng,h[--g]=k.wt;zc.call(this,\"cluster\",{message:[h,d,e,b,f]},void 0)}u(ss,bn);function ts(a,b,c){this.sa=a;this.hm=b;this.ge=c}t(\"H.clustering.fastgrid.NoisePoint\",ts);ts.prototype.Da=function(){this.Wc||(this.Wc=this.sa.ab(this.hm[1],this.hm[0],1));return this.Wc};ts.prototype.getPosition=ts.prototype.Da;ts.prototype.Zd=function(){return this.hm.weight};ts.prototype.getWeight=ts.prototype.Zd;ts.prototype.ag=me;ts.prototype.isCluster=ts.prototype.ag;ts.prototype.Ud=function(){return this.ge-this.sa.kh};ts.prototype.getMinZoom=ts.prototype.Ud;ts.prototype.getData=function(){return this.hm.data};\nts.prototype.getData=ts.prototype.getData;function us(a,b,c,d){this.sa=a;this.wc=b;this.ge=c;this.Mq=d;this.Ap=Ia(this.Ap,this);this.yp=Ia(this.yp,this)}t(\"H.clustering.fastgrid.Cluster\",us);us.prototype.Da=function(){this.Wc||(this.Wc=this.sa.ab(this.wc.hj,this.wc.ij,this.wc.Ic));return this.Wc};us.prototype.getPosition=us.prototype.Da;us.prototype.Zd=function(){return this.wc.Ic};us.prototype.getWeight=us.prototype.Zd;us.prototype.ag=le;us.prototype.isCluster=us.prototype.ag;\nus.prototype.Ud=function(){return this.ge?this.ge-this.sa.kh:-1/0};us.prototype.getMinZoom=us.prototype.Ud;us.prototype.sm=function(){return this.Mq-this.sa.kh};us.prototype.getMaxZoom=us.prototype.sm;us.prototype.G=function(){this.N||(this.N=jg(this.sa.ab(this.wc.gh,this.wc.gj,1),this.sa.ab(this.wc.ej,this.wc.fj,1),!0));return this.N};us.prototype.getBoundingBox=us.prototype.G;us.prototype.zp=function(a){this.bu=a;this.wc.Ce(this.Ap,cd)};us.prototype.forEachEntry=us.prototype.zp;\nus.prototype.Ap=function(a,b){var c=!1,d,e;a.Ic>=this.sa.Dv&&a!==this.wc&&a.Ic!==this.wc.Ic&&(this.bu(new us(this.sa,a,0,b)),c=!0);if(!c&&(d=a.entries))for(a=d.length,e=0;e<a;e++)this.bu(new ts(this.sa,d[e],b));return c};us.prototype.Dj=function(a){this.qz=a;this.wc.Ce(this.yp,cd)};us.prototype.forEachDataPoint=us.prototype.Dj;us.prototype.yp=function(a,b){var c;if(a=a.entries){var d=a.length;for(c=0;c<d;c++)this.qz(new ts(this.sa,a[c],b))}return!1};function vs(a,b,c,d,e,f){this.Ho=b;a&&(this.parent=a,b&1?(c=a[8],e=a[5]):(c=a[7],e=a[8]),b&2?(d=a[9],f=a[6]):(d=a[4],f=a[9]));this[7]=c;this[5]=e;this[8]=(c+e)/2;this[4]=d;this[6]=f;this[9]=(d+f)/2}m=vs.prototype;m.ib=0;m.wh=function(a){return this[a]||(++this.ib,this[a]=new vs(this,a))};m.removeChild=function(a){var b=a.Ho;this[b]===a&&(delete this[b],delete a.parent,--this.ib)};m.Ce=function(a,b){for(var c=0,d=this;d=d.parent;)++c;ws(this,a,b,c)};\nfunction ws(a,b,c,d){var e,f;if(!b(a,d)&&c--)for(++d,e=0;4>e;e++)(f=a[e])&&ws(f,b,c,d)}m.Tg=function(a){(this.entries||(this.entries=[])).push(a)};m.hj=0;m.ij=0;m.Ic=0;function xs(a){this.Sh=a||10;this.Gk=this.Fk=this.cj=this.bj=2147483648;this.Im()}m=xs.prototype;m.Im=function(){this.head=this.root=new vs(null,NaN,this.bj-this.Fk,this.cj-this.Gk,this.bj+this.Fk,this.cj+this.Gk)};m.Pl=function(){ys(this,this.root);this.Im()};function ys(a,b){var c,d;for(c=0;4>c;c++)if(d=b[c])ys(a,d),delete b[c];delete b.parent;delete b.entries}\nm.md=function(a){var b=this.head,c;if(a){var d=a;if(d!==b)for(b=d;d=d.parent;)if(d.entries||1<d.ib)b=d}else for(;!b.entries&&2>(c=b.ib);)if(c)b=d;else break;this.head=b};m.ae=function(a,b,c,d){var e=this.root;if(!(a>=e[7]&&b>=e[4]&&a<=e[5]&&b<=e[6]))throw Error(\"Coordinates out of bounds\");return this.Yb(this.root,a,b,c,this.Sh,d)};\nm.Yb=function(a,b,c,d,e,f){var g=a.entries;e?a.ib?g=this.Wj(a,b,c,d,e,f):g?(g=g[0],g=a.wh(+(g[1]>=a[8])|+(g[0]>=a[9])<<1),g.entries=a.entries,g.hj=a.hj,g.ij=a.ij,g.Ic=a.Ic,g.gh=a.gh,g.gj=a.gj,g.ej=a.ej,g.fj=a.fj,delete a.entries,this.md(g),g=this.Wj(a,b,c,d,e,f)):(a.Tg(g=new zs(b,c,d,f)),this.md(a)):(g||this.md(a),a.Tg(g=new zs(b,c,d,f)));a.hj+=b*d;a.ij+=c*d;a.Ic+=d;a.gh===A?(a.gh=a.ej=b,a.gj=a.fj=c):(b<a.gh?a.gh=b:b>a.ej&&(a.ej=b),c<a.gj?a.gj=c:c>a.fj&&(a.fj=c));return g};\nm.Wj=function(a,b,c,d,e,f){return this.Yb(a.wh(+(b>=a[8])|+(c>=a[9])<<1),b,c,d,e-1,f)};m.Ce=function(a,b){ws(this.root,a,b===+b?b:this.Sh,0)};function zs(a,b,c,d){this[0]=b;this[1]=a;this.weight=c;this.data=d};function As(a){ks.call(this,a);a=this.options;this.oe=a.projection;this.lk=a.min;this.hg=a.max;this.Dv=a.minWeight;this.kh=7-Hc(Lc(Gc(1,a.eps))/Vc);this.yr=new xs(Gc(this.lk,this.hg+this.kh))}u(As,ks);m=As.prototype;m.xe=function(a){var b=0,c=a.length,d,e=new K(0,0),f=this.oe,g=this.yr;As.g.xe.call(this,a);for(g.Pl();b<c;b++)f.Ue(d=a[b],e).scale(4294967296).floor(),g.ae(e.x,e.y,d.wt,d.data);this.rd=!0};m.Bc=function(a){As.g.Bc.call(this,a);this.xe(this.jc)};\nm.El=function(a){for(var b=a.length,c=As.g.Bc;b--;)c.call(this,a[b]);this.xe(this.jc)};m.Hk=function(a){As.g.Hk.call(this,a);this.xe(this.jc)};m.ab=function(a,b,c,d){return this.oe.ab(a/c/4294967296,b/c/4294967296,d)};m.gs=function(a){if(this.rd){var b={clusters:[],noisePoints:[]};Bs(this,this.yr.root,0,this.hg+this.kh,-1/0,b,null);this.rd=!1;a(b)}};\nfunction Bs(a,b,c,d,e,f,g){var h=b.Ic,k;g&&(g.node.Ic!==h?(f.clusters.push(new us(a,g.node,g.depth,c-1)),g=null):e++);g||(h>=a.Dv?(g={node:b,depth:c},e=c):Cs(a,b,e+1,f));if(b.ib&&d--)for(c++,h=0;4>h;h++)if(k=b[h])Bs(a,k,c,d,e,f,g),g=null;g&&f.clusters.push(new us(a,g.node,g.depth,a.hg+a.kh))}function Cs(a,b,c,d){b=b.entries;var e;if(b){var f=b.length;d=d.noisePoints;for(e=0;e<f;e++)d.push(new ts(a,b[e],c))}else for(e=0;4>e;e++)(f=a[e])&&Cs(a,f,c,d)}\nm.disposeInternal=function(){As.g.disposeInternal.call(this);this.yr=null};As.prototype.disposeInternal=As.prototype.disposeInternal;function Ds(a,b){b=b||{};var c={},d=b.min||0,e=Gc(d,b.max||22);d={min:d,max:e};Ds.g.constructor.call(this,d);this.qa=b.pixelRatio||$d();Qa(c,ls,d,b.clusteringOptions||{});c.minWeight=Gc(ls.minWeight,c.minWeight);switch(c.strategy){case Es.DYNAMICGRID:if(c.projection!==Vf)throw new C(Ds,1,\"Unsupported projection\");this.sa=new qs(c);break;case Es.GRID:this.sa=new ps(c);break;default:this.sa=new As(c)}this.sa.xe(a);this.kl=b.theme||new is(this.qa);this.So=z(this.So,this);this.jg=z(this.jg,this);Fs(this)}\nu(Ds,M);t(\"H.clustering.Provider\",Ds);Ds.prototype.disposeInternal=function(){Ds.g.disposeInternal.call(this);this.Dg.la();this.sa.l();delete this.sa;delete this.Um;delete this.kl;globalThis.clearTimeout(this.mp)};var Es={FASTGRID:0,GRID:1,DYNAMICGRID:2};Ds.Strategy=Es;Ds.prototype.my=150;Ds.prototype.So=function(){this.dispatchEvent(\"start\");this.sa.gs(this.jg,ne)};function Fs(a,b,c){a.mp&&globalThis.clearTimeout(a.mp);b&&a.sa.Xw(b,c);a.mp=globalThis.setTimeout(a.So,a.my)}\nDs.prototype.jg=function(a){this.Um=a;Gs(this);this.dispatchEvent(\"end\")};Ds.prototype.xe=function(a){this.sa.xe(a);Fs(this)};Ds.prototype.setDataPoints=Ds.prototype.xe;Ds.prototype.Bc=function(a){this.sa.Bc(a);Fs(this)};Ds.prototype.addDataPoint=Ds.prototype.Bc;Ds.prototype.El=function(a){this.sa.El(a);Fs(this)};Ds.prototype.addDataPoints=Ds.prototype.El;Ds.prototype.Hk=function(a){this.sa.Hk(a);Fs(this)};Ds.prototype.removeDataPoint=Ds.prototype.Hk;Ds.prototype.NA=function(){return this.kl};\nDs.prototype.getTheme=Ds.prototype.NA;Ds.prototype.jD=function(a){this.kl=a;this.Um&&(this.Dg.la(),Gs(this))};Ds.prototype.setTheme=Ds.prototype.jD;function Gs(a){var b=a.Um.clusters,c=a.Um.noisePoints,d=b.length,e=c.length,f=0<d+e;for(a.Dg.la();e--;){var g=c[e];a.Dg.ba(a.kl.getNoisePresentation(g))}for(;d--;)c=b[d],a.Dg.ba(a.kl.getClusterPresentation(c));f&&a.kb()}Ds.prototype.Xc=function(){return!0};Ds.prototype.providesDomMarkers=Ds.prototype.Xc;Ds.prototype.Yc=function(){return!0};\nDs.prototype.providesMarkers=Ds.prototype.Yc;Ds.prototype.pe=function(){return!0};Ds.prototype.providesSpatials=Ds.prototype.pe;Ds.prototype.Bk=function(a,b){Fs(this,a,b)};Ds.prototype.preprocessData=Ds.prototype.Bk;t(\"H.clustering.buildInfo\",function(){return xm(\"H-clustering\",\"1.65.0\",\"643e65e\",{region:\"row\"})});\n");